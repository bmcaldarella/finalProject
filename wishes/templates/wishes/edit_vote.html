{% extends "wishes/layout.html" %}
{% load static %}

{% block body %}
<div class="menu">
    <svg class="menu-icon" id="menu-icon-1" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
      <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5" />
    </svg>
  
      <div class="manu-items">
      
      <ul>
        <li>
          <svg class="new-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
            <path stroke-linecap="round" stroke-linejoin="round" d="M13.5 16.875h3.375m0 0h3.375m-3.375 0V13.5m0 3.375v3.375M6 10.5h2.25a2.25 2.25 0 002.25-2.25V6a2.25 2.25 0 00-2.25-2.25H6A2.25 2.25 0 003.75 6v2.25A2.25 2.25 0 006 10.5zm0 9.75h2.25A2.25 2.25 0 0010.5 18v-2.25a2.25 2.25 0 00-2.25-2.25H6a2.25 2.25 0 00-2.25 2.25V18A2.25 2.25 0 006 20.25zm9.75-9.75H18a2.25 2.25 0 002.25-2.25V6A2.25 2.25 0 0018 3.75h-2.25A2.25 2.25 0 0013.5 6v2.25a2.25 2.25 0 002.25 2.25z" />
          </svg>
          <a class="name-menu"  href="{% url 'new_survey' user_id=user.id %}">
              
          <strong>New Survey</strong> </a>
        </li>
      </div>
      <div class="manu-items">
        <li >
          <?xml version="1.0" ?><svg  class="new-icon" enable-background="new 0 0 64 64" id="Layer_2" version="1.1" viewBox="0 0 64 64" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g><path d="M56.7949219,5H7.2050781C3.7836914,5,1,7.7836914,1,11.2050781v33.5898438C1,48.2167969,3.7836914,51,7.2050781,51H14   c1.1044922,0,2-0.8955078,2-2s-0.8955078-2-2-2H7.2050781C5.9892578,47,5,46.0107422,5,44.7949219V11.2050781   C5,9.9892578,5.9892578,9,7.2050781,9h49.5898438C58.0107422,9,59,9.9892578,59,11.2050781v33.5898438   C59,46.0107422,58.0107422,47,56.7949219,47H21c-1.1044922,0-2,0.8955078-2,2s0.8955078,2,2,2h35.7949219   C60.2163086,51,63,48.2167969,63,44.7949219V11.2050781C63,7.7836914,60.2163086,5,56.7949219,5z"/><path d="M43.4946289,26.6831055l-5.375,6.1430664L27.6000977,18.7998047   c-0.3618164-0.4824219-0.9223633-0.7758789-1.5249023-0.7983398c-0.6030273-0.0268555-1.1831055,0.2280273-1.5805664,0.6816406   L18.0922852,26H13c-1.1044922,0-2,0.8955078-2,2s0.8955078,2,2,2h6c0.5766602,0,1.1254883-0.2490234,1.5053711-0.6831055   l5.375-6.1430664l10.5195313,14.0263672c0.3618164,0.4824219,0.9223633,0.7753906,1.5249023,0.7988281   C37.949707,38,37.9750977,38,38,38c0.5756836,0,1.1245117-0.2480469,1.5053711-0.6826172L45.9077148,30H51   c1.1044922,0,2-0.8955078,2-2s-0.8955078-2-2-2h-6C44.4233398,26,43.8745117,26.2490234,43.4946289,26.6831055z"/><path d="M51,17c1.1044922,0,2-0.8955078,2-2s-0.8955078-2-2-2h-3c-1.1044922,0-2,0.8955078-2,2s0.8955078,2,2,2H51z"/><path d="M58,55H6c-1.1044922,0-2,0.8955078-2,2s0.8955078,2,2,2h52c1.1044922,0,2-0.8955078,2-2S59.1044922,55,58,55z"/></g></svg>
        
          <a class="name-menu" id="name-menu" href="{% url 'vote' %}"> <strong>Dashboard</strong> </a>
        </li>
  
      </div>
  
      <div class="manu-items">
        <li>
           <svg class="new-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6" id="Layer_3" >
            <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 6a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0zM4.501 20.118a7.5 7.5 0 0114.998 0A17.933 17.933 0 0112 21.75c-2.676 0-5.216-.584-7.499-1.632z" />
          </svg>
          <a class="name-menu" href="{% url 'profile' user_id=user.id %}">
  
         <strong>Profile</strong></a>
        </li>
  
      </ul>
    </div>
  </div>

<form method="post" enctype="multipart/form-data">
    {% csrf_token %}
    <div class="full-container-edit">
        <h1>Edit Survey</h1>
        <div class="survey-name-edit">
            <label for="nameVote"></label>
            <input class="form-control" placeholder="survey name (Edit)" type="text" name="nameVote" style="width:450px;height:50px ; border-radius: 15px;" value="{{ vote.nameVote }}" required>
        </div>
        <label for="description"></label>
        <textarea class="form-control" placeholder="survey Description (Edit)" style="border-radius: 15px; height: 100px;" class="form-control" id="description" name="description" required>{{ vote.description }}</textarea>

        <label for="imageVote"><strong>Select a new image </strong>(optional*):</label>
        <input type="file" class="form-control-file" name="imageVote">

        <div class="form-group" id="vote-options">
            <label class="name-options" for="option"><strong>Options</strong></label>

            {% for option in vote.options.all %}
            <div class="option-group">
                <input type="text" class="form-control" style="width: 300px;margin-bottom:20px ; border-radius: 15px;" name="option_text[]" value="{{ option.option_text }}" placeholder="Nombre de la opción" />
                <textarea class="form-control" style="border-radius: 15px; height: 100px;" name="description_vote" placeholder="Descripción de la opción del voto">{{ option.description_vote }}</textarea>
                {% if option.image_description %}
                <img class="img-options" src="{{ option.image_description.url }}" alt="image_description">
                {% endif %}
                <label class="sl-nw-image" for="image_description"><strong >Select a new image</strong>(Optional *)</label>
                <input class="file-img" type="file" class="form-control-file" name="image_description" />

                <button type="button" id="btn-remove"class="btn btn-danger btn-sm" onclick="removeOption(this)">Remove option</button>
                <hr>
            </div>
            {% endfor %}
        </div>
        <button type="submit" class="btn btn-dark">Guardar cambios</button>
        <button id="add-option-btn-edit" class="btn btn-secondary">
            <span>
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24"><path fill="none" d="M0 0h24v24H0z"></path><path fill="currentColor" d="M11 11V5h2v6h6v2h-6v6h-2v-6H5v-2z"></path></svg> Options
            </span>
        </button>
    </div>
</form>

<script>
    document.getElementById("add-option-btn-edit").addEventListener("click", function (event) {
        event.preventDefault();

        var voteOptions = document.getElementById("vote-options");
        var newOption = document.createElement("div");
        newOption.className = "option-group";
        newOption.innerHTML =
            '<input type="text" name="option_text[]" placeholder="Nombre de la opción"  class="form-control" style="width: 300px;margin-top:20px;margin-bottom:20px; border-radius: 15px;"  />' +
            '<textarea class="form-control" name="description_vote" placeholder="Descripción de la opción del voto"></textarea  class="form-control" style="border-radius: 15px; height: 100px;">' +
            '<label for="image_description"><strong>Selecciona una imagen:</strong></label>' +
            '<input type="file" class="form-control-file" name="image_description" />' +
            '<button type="button" class="btn btn-danger btn-sm" style="margin-top:30px";onclick="removeOption(this)">Eliminar opción</button>';
        voteOptions.appendChild(newOption);
    });

    function removeOption(button) {
        var optionGroup = button.parentNode;
        optionGroup.parentNode.removeChild(optionGroup);
    }

    var menu = document.getElementById("menu-icon-1");
    var items = document.querySelectorAll(".manu-items");
    var isMenuOpen = false;
    
    menu.addEventListener("click", function() {
      if (isMenuOpen) {
        items.forEach(function(item) {
          item.style.display = "none";
        });
      } else {
        items.forEach(function(item) {
          item.style.display = "block";
        });
      }
    
      isMenuOpen = !isMenuOpen;
    });

</script>

{% endblock %}
